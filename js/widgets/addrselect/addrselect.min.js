!function(t,n){"use strict";var s={top:0,province:[],city:[],provinceValue:"",cityValue:"",areaCode:"",litemplate:'<li class="em-list-item" data-areacode="{{value}}" data-index="{{index}}">{{{text}}}</li>',proviceActiveCls:"cur",cityActiveCls:"cur",isClose:!0,provinceIndex:0,cityIndex:0,isMask:!0};function e(e){var i=this,t=[{key:window.cityData3,value:"请引入city.data-3.js"},{key:e,value:"请传入配置项!"},{key:e.container,value:"请传入容器"}];i.environment(t);var a=n.selector(e.container);if(e.container=a,!e.itemClick&&"function"!=typeof e.itemClick)throw new Error("请传入回调函数itemClick");i.itemClick=e.itemClick,i._insertTempl(a,'<div class="em-province-area mui-scroll-wrapper"><ul class="em-province-list mui-scroll" data-type="province"></ul></div><div class="em-city-area mui-scroll-wrapper"><ul class="em-city-list cur mui-scroll" data-type="city"></ul></div>'),i=n.extend(i,s,e),a.style.top=parseInt(i.top)+"px",i.isMask&&i._makeMask(),i.domArray={provinceList:a.querySelector("[data-type=province]"),cityList:a.querySelector("[data-type=city]")},i._analysisCityData(cityData3),i._showCity(),i._initListeners()}e.prototype={show:function(){this.container.style.display="block",this.maskEle&&(this.maskEle.style.display="block")},hide:function(){this.container.style.display="none",this.maskEle&&(this.maskEle.style.display="none")},toggle:function(){var e=this.container,i=this.maskEle;"block"==e.style.display?(e.style.display="none",i&&(i.style.display="none")):(e.style.display="block",i&&(i.style.display="block"))},_insertTempl:function(e,i){e.innerHTML=i,mui(".mui-scroll-wrapper").scroll({scrollY:!0,scrollX:!1})},environment:function(e){for(var i=0,t=e.length;i<t;i++)if(!e[i].key)throw new Error(e[i].value)},_analysisCityData:function(e){var i=this,t=i.province=[],a=i.domArray;e.forEach(function(e,i){t.push({text:e.text,value:e.value,index:i})}),i._ergodic(t,a.provinceList)},_ergodic:function(e,i,t){var a="",n=this.domArray.cityList.children,s=this.litemplate;e.forEach(function(e){a+=Mustache.render(s,e)}),i.innerHTML=a,null!=t&&n[t].classList.add("cur")},_initListeners:function(){var n=this,a=n.maskEle,s=n.container,c=n.isClose,e=n.domArray.provinceList,l=n.proviceActiveCls,r=n.domArray.cityList,o=n.cityActiveCls;n.provinceName=e.children[0].innerHTML,n.cityName=r.children[0].innerHTML,n.areaCode=r.children[0].dataset.areacode,n._addEvent(e,"li",function(){var e=this,i=e.dataset.index,t=cityData3[i].children[0].children||cityData3[i].children,a=n.siblings(e);n.provinceIndex=i,n.provinceName=e.innerHTML,e.classList.add(l),a.forEach(function(e,i){e.classList.remove(l)}),n._ergodic(t,r)}),n._addEvent(r,"li",function(){var e=this,i=n.siblings(e);e.classList.add(o),r.classList.remove("cur"),i.forEach(function(e){e.classList.remove(o)}),[].slice.call(r.children).forEach(function(e,i){e.classList.contains(o)&&(n.cityIndex=i)}),1==c&&(s.style.display="none");var t={areaCode:e.dataset.areacode,cityName:e.innerHTML,provinceName:n.provinceName};a&&(a.style.display="none"),n.itemClick.call(e,t)}),n._addEvent(a,"",function(){this.style.display="none",s.style.display="none"})},_addEvent:function(e,t,a){t=t.toUpperCase(),e&&e.addEventListener("tap",function(e){for(var i=e.target;t&&i.tagName!=t;)i=i.parentNode;a.call(i)})},siblings:function(e){for(var i=[],t=e.parentNode.children,a=0,n=t.length;a<n;a++)e!=t[a]&&i.push(t[a]);return i},_showCity:function(e,i){e=e||0,i=i||0;var t=cityData3[e].children[0].children,a=this.domArray,n=a.provinceList,s=a.cityList;n.children[e].classList.add("cur"),this._ergodic(t,s,i)},_makeMask:function(){var e,i=t.getElementById("em-mask");i?this.maskEle=i:((e=t.createElement("div")).id="em-mask",e.style.cssText="display: none; position: fixed; left: 0; right: 0; bottom: 0; background-color: #666; z-index: 10;",e.style.top=this.top,t.body.appendChild(e),this.maskEle=t.getElementById("em-mask"))}},window.AddrSelect=e}(document,window.Util);