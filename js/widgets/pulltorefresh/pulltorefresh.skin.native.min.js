!function(e,i){var c,s="ontouchend"in document,p=!1,r=!1,d={down:{callback:i.noop},up:{auto:!1,show:!0,contentrefresh:"正在加载...",callback:i.noop},element:"#pullrefresh"},l='<div class="mui-pull-bottom-tips mui-pull-bottom-tips2"><i class="mui-spinner"></i><span class="mui-pull-loading">{{contentrefresh}}</span></div>';function a(e,o){var n=this;n.loadingUp=!1,n.finished=!1,n.options=o,"string"==typeof e&&(e=document.querySelector(e)),n.elem=e,n.elem.classList.add("pulltorefresh-native-type"),function(){var t=0,l=0,u=document.body,e=s?"touchstart":"mousedown";u.addEventListener(e,function(e){var o=s?e.touches[0]:e;Number(o.pageX),t=Number(o.pageY),l=u.scrollTop,p=!0});var o=s?"touchend":"mouseup";u.addEventListener(o,function(e){r=p=!1});var n=s?"touchmove":"mousemove";u.addEventListener(n,function(e){var o=s?e.touches[0]:e,n=(Number(o.pageX),Number(o.pageY));p&&(30<n-t&&0==u.scrollTop&&(r||(console.log("PullDown"),r=!0)),100<t-n&&l==u.scrollTop&&(c.loadingUp||c.finished||c.options.up&&(m(!0),c.options.up.callback&&c.options.up.callback())))});document.onscroll=function(){var e,o,n,t,l=(o=e=0,document.body&&(e=document.body.scrollTop||0),document.documentElement&&(o=document.documentElement.scrollTop||0),o<e?e:o);document.getElementById("sliderSegmentedControl");l+("CSS1Compat"==document.compatMode?document.documentElement.clientHeight:document.body.clientHeight)===(t=n=0,document.body&&(n=document.body.scrollHeight),document.documentElement&&(t=document.documentElement.scrollHeight),0<n-t?n:t)&&(c.loadingUp||c.finished||c.options.up&&(m(!0),c.options.up.callback&&c.options.up.callback()))}}(),n.options.down&&(i.os.dd?dd.ui.pullToRefresh.enable({onSuccess:function(){n.options.down.callback&&n.options.down.callback()},onFail:function(){dd.ui.pullToRefresh.stop()}}):ejs.nativeUI.pullToRefresh.enable(function(){n.options.down.callback&&n.options.down.callback()}))}function m(e){var o,n,t=c.elem;t&&(e?c.loadingUp||(o=c.options.up.contentrefresh||"正在加载...",l=l.replace("{{contentrefresh}}",o),t.appendChild(function(e){if(null==e||"string"!=typeof e)return null;var o,n=document.createElement("div"),t=document.createDocumentFragment();for(n.innerHTML=e;o=n.firstChild;)t.appendChild(o);return t}(l)),c.loadingUp=!0):c.loadingUp&&((n=t.querySelector(".mui-pull-bottom-tips"))&&n.parentNode.removeChild(n),c.loadingUp=!1))}a.prototype.pullupLoading=function(){c.options.up&&(m(!0),c.options.up.callback&&c.options.up.callback())},a.prototype.endPullUpToRefresh=function(e){e&&(this.finished=!0),c.options.up&&m(!1)},a.prototype.endPullDownToRefresh=function(){i.os.dd?dd.ui.pullToRefresh.stop():i.os.ejs&&ejs.nativeUI.pullToRefresh.stop()},a.prototype.refresh=function(e){this.finished=!1},e.initPullToRefresh=function(e,o){return c||(o=i.extend(!0,{},d,o),"string"==typeof(n=(n="object"!=typeof e?e:(o=e).element)||d.element)&&(n=document.querySelector(n)),n?("string"==typeof(t=n||"#pullrefresh")&&(t=document.querySelector(t)),(i.os.ejs||i.os.dd)&&((l=t).classList.remove("mui-scroll-wrapper"),(u=l.querySelector(".mui-scroll"))&&u.classList.remove("mui-scroll")),c=new a(n,o),o.up&&o.up.auto&&c.pullupLoading(),c):(console.error("错误,下拉刷新容器为空!"),null));var n,t,l,u},e.init=e.initPullToRefresh,i.namespace("skin.natives",e)}({},PullToRefreshTools);