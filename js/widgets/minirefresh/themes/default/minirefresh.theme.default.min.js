!function(s,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):s.MiniRefresh=t()}(this,function(){"use strict";var s=function(s,t,o){return t&&n(s.prototype,t),o&&n(s,o),s};function n(s,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(s,n.key,n)}}var t=MiniRefreshTools.Core,o=MiniRefreshTools.version,e=MiniRefreshTools.extend,i=MiniRefreshTools.namespace,r="minirefresh-theme-default",a="minirefresh-fade-in",p="minirefresh-fade-out",h="minirefresh-rotate",c="minirefresh-hardware-speedup",l="minirefresh-hidden",u="body-scroll-wrap",d="downwrap-success",w="downwrap-error",f="status-default",W="status-pull",v="status-loading",m="status-success",T="status-error",g="status-nomore",y={down:{successAnim:{isEnable:!1,duration:300},contentdown:"下拉刷新",contentover:"释放刷新",contentrefresh:"加载中...",contentsuccess:"刷新成功",contenterror:"刷新失败",isWrapCssTranslate:!1},up:{toTop:{isEnable:!0,duration:300,offset:800},contentdown:"",contentrefresh:"加载中...",contentnomore:"没有更多数据了"}},_=(function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);s.prototype=Object.create(t&&t.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(s,t):s.__proto__=t)}(L,t),s(L,[{key:"_initHook",value:function(){var s=this.container,t=this.contentWrap;s.classList.add(r),t.classList.add(c),this.options.isUseBodyScroll&&(s.classList.add(u),t.classList.add(u)),this._initDownWrap(),this._initUpWrap(),this._initToTop()}},{key:"_refreshHook",value:function(){this.options.down.isWrapCssTranslate?this._transformDownWrap(-this.downWrapHeight):this._transformDownWrap(0,0,!0),this.options.up.toTop.isEnable||(this.toTopBtn&&this.toTopBtn.classList.add(l),this.isShowToTopBtn=!1)}},{key:"_initDownWrap",value:function(){var s=this.container,t=this.contentWrap,o=this.options,n=document.createElement("div");n.className="minirefresh-downwrap "+c,n.innerHTML=' \n            <div class="downwrap-content">\n                <p class="downwrap-progress"></p>\n                <p class="downwrap-tips">'+o.down.contentdown+"</p>\n            </div>\n        ",s.insertBefore(n,t),this.downWrap=n,this.downWrapProgress=this.downWrap.querySelector(".downwrap-progress"),this.downWrapTips=this.downWrap.querySelector(".downwrap-tips"),this.isCanPullDown=!1,this.downWrapHeight=n.offsetHeight||75,this._transformDownWrap(-this.downWrapHeight),L._changeWrapStatusClass(this.downWrap,f)}},{key:"_transformDownWrap",value:function(s,t,o){var n,e,i=0<arguments.length&&void 0!==s?s:0,r=1<arguments.length&&void 0!==t?t:0;(o||this.options.down.isWrapCssTranslate)&&(n=r+"ms",e="translateY("+i+"px)  translateZ(0px)",this.downWrap.style.webkitTransitionDuration=n,this.downWrap.style.transitionDuration=n,this.downWrap.style.webkitTransform=e,this.downWrap.style.transform=e)}},{key:"_initUpWrap",value:function(){var s=this.contentWrap,t=this.options,o=document.createElement("div");o.className="minirefresh-upwrap "+c,o.innerHTML=' \n            <p class="upwrap-progress"></p>\n            <p class="upwrap-tips">'+t.up.contentdown+"</p>\n        ",o.style.visibility="hidden",s.appendChild(o),this.upWrap=o,this.upWrapProgress=this.upWrap.querySelector(".upwrap-progress"),this.upWrapTips=this.upWrap.querySelector(".upwrap-tips"),L._changeWrapStatusClass(this.upWrap,f)}},{key:"_initToTop",value:function(){var s,t=this,o=this.options,n=o.up.toTop.isEnable,e=o.up.toTop.duration;n&&((s=document.createElement("div")).className="minirefresh-totop "+r,s.onclick=function(){t.scroller.scrollTo(0,e)},s.classList.add(l),this.toTopBtn=s,this.isShowToTopBtn=!1,this.container.appendChild(s))}},{key:"_pullHook",value:function(s,t){var o,n=this.options;s<t?this.isCanPullDown&&(this.isCanPullDown=!1,L._changeWrapStatusClass(this.downWrap,f),this.downWrapTips.innerText=n.down.contentdown):this.isCanPullDown||(this.downWrapTips.innerText=n.down.contentover,this.isCanPullDown=!0,L._changeWrapStatusClass(this.downWrap,W)),this.downWrapProgress&&(o="rotate("+s/t*360+"deg)",this.downWrapProgress.style.webkitTransform=o,this.downWrapProgress.style.transform=o),this._transformDownWrap(-this.downWrapHeight+s)}},{key:"_scrollHook",value:function(s){var t=this.options,o=t.up.toTop.isEnable,n=this.toTopBtn;o&&n&&(s>=t.up.toTop.offset?this.isShowToTopBtn||(n.classList.remove(p),n.classList.remove(l),n.classList.add(a),this.isShowToTopBtn=!0):this.isShowToTopBtn&&(n.classList.add(p),n.classList.remove(a),this.isShowToTopBtn=!1))}},{key:"_downLoaingHook",value:function(){this._transformDownWrap(-this.downWrapHeight+this.options.down.offset,this.options.down.bounceTime),this.downWrapTips.innerText=this.options.down.contentrefresh,this.downWrapProgress.classList.add(h),L._changeWrapStatusClass(this.downWrap,v)}},{key:"_downLoaingSuccessHook",value:function(s,t){this.options.down.contentsuccess=t||this.options.down.contentsuccess,this.downWrapTips.innerText=s?this.options.down.contentsuccess:this.options.down.contenterror,this.downWrapProgress.classList.remove(h),this.downWrapProgress.classList.add(p),this.downWrapProgress.classList.add(s?d:w),L._changeWrapStatusClass(this.downWrap,s?m:T)}},{key:"_downLoaingEndHook",value:function(s){this.downWrapTips.innerText=this.options.down.contentdown,this.downWrapProgress.classList.remove(h),this.downWrapProgress.classList.remove(p),this.downWrapProgress.classList.remove(s?d:w),this.isCanPullDown=!1,this._transformDownWrap(-this.downWrapHeight,this.options.down.bounceTime),L._changeWrapStatusClass(this.downWrap,f)}},{key:"_cancelLoaingHook",value:function(){this._transformDownWrap(-this.downWrapHeight,this.options.down.bounceTime),L._changeWrapStatusClass(this.downWrap,f)}},{key:"_upLoaingHook",value:function(s){s?(this.upWrapTips.innerText=this.options.up.contentrefresh,this.upWrapProgress.classList.add(h),this.upWrapProgress.classList.remove(l),this.upWrap.style.visibility="visible"):this.upWrap.style.visibility="hidden",L._changeWrapStatusClass(this.upWrap,v)}},{key:"_upLoaingEndHook",value:function(s){s?(this.upWrapTips.innerText=this.options.up.contentnomore,L._changeWrapStatusClass(this.upWrap,g)):(this.upWrapTips.innerText=this.options.up.contentdown,L._changeWrapStatusClass(this.upWrap,f)),this.upWrapProgress.classList.remove(h),this.upWrapProgress.classList.add(l)}},{key:"_resetUpLoadingHook",value:function(){this.upWrapTips.innerText=this.options.up.contentdown,this.upWrapProgress.classList.remove(h),this.upWrapProgress.classList.add(l),L._changeWrapStatusClass(this.upWrap,f)}},{key:"_lockUpLoadingHook",value:function(s){this.upWrap.style.visibility=s?"hidden":"visible"}},{key:"_lockDownLoadingHook",value:function(s){this.downWrap.style.visibility=s?"hidden":"visible"}}],[{key:"_changeWrapStatusClass",value:function(s,t){s.classList.remove(g),s.classList.remove(f),s.classList.remove(W),s.classList.remove(v),s.classList.remove(m),s.classList.remove(T),s.classList.add(t)}}]),L);function L(s){!function(s,t){if(!(s instanceof t))throw new TypeError("Cannot call a class as a function")}(this,L);var t=e(!0,{},y,s);return function(s,t){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?s:t}(this,(L.__proto__||Object.getPrototypeOf(L)).call(this,t))}return _.sign="default",_.version=o,i("theme.defaults",_),window.MiniRefresh=_});