!function(t,e,n){"use strict";function r(t){var e=this;if(!t)throw new Error("请传入配置项");var n=t.container,r=t.isSwipe||"1";1!==n.nodeType&&(n=document.querySelector(n)),e.TABBTNRENTNODE=document.querySelector(".em-nav"),e.TABBTNWIDTH=document.querySelector(".em-nav a").offsetWidth,e.TABLINENODE=document.querySelector("#topNavLine"),e.TABLINEWIDTH=e.TABLINENODE.offsetWidth,e.TABVIEWPARENTNODE=document.querySelector(".em-tab-view"),e.TABVIEWWIDTH=document.querySelector(".em-tab-item").offsetWidth,e.MESSAGEITEMGUID=Util.getExtraDataByKey("messageitemguid")||"",e.TYPE=Util.getExtraDataByKey("type")||"";1==r&&e._screenMove(),e._changeTab()}r.prototype={_screenMove:function(){this.currentPostion=this.currentPostion||0;var t,e,n,r=this,o=document.querySelector(".em-main"),a=this.TABVIEWPARENTNODE,i=this.TABVIEWWIDTH*(this.TABVIEWPARENTNODE.children.length-1),s=0,u="left",c=!1,T=!1,l=[];o.addEventListener("touchstart",function(o){var i=o.touches[0];e=i.pageX,n=i.pageY,t=r.currentPostion,a.style.webkitTransition="all 0s",c=!1}),o.addEventListener("touchmove",this._throttle(function(o){o.preventDefault();var f=o.touches[0],h=f.pageX,E=f.pageY,d=h-e,m=E-n;if(Math.abs(d)>Math.abs(m)&&1!=T){o.preventDefault(),s=d;var N=t+d,p=/(-?\d+)(\.\d+)?px/g,v=r.TABVIEWPARENTNODE.style.webkitTransform.match(p);try{v=v[0].replace("px","")}catch(B){}l.push(d),l.length>2&&l.shift(),u=l[0]-l[1]<0?"right":"left",v<=0&&v>=-i&&(N<=0&&N>=-i?(r._transfrom(a,N),c=!0):(r._transfrom(a,d>0?0:-i),c=!0))}else T=!0},12,!0)),o.addEventListener("touchend",this._debounce(function(t){var e=0,n=r.currentPostion,o=r.TABVIEWWIDTH;if(T=!1,a.style.webkitTransition=".5s transform",c){e="left"==u?n-(o+s):n+o-s,e>0&&(e=0),e<-i&&(e=-i);var l=Math.abs(r.currentPostion)/Math.abs(o);"left"==u?l+=.35:l-=.35,r._transfrom(a,-o*Math.round(l)),r._switchHead(Math.round(l)+1)}},16))},_transfrom:function(t,e,n){t.style.webkitTransform="translate3d("+e+"px,0,0)",1!=n&&(this.currentPostion=e)},_debounce:function(t,e,n){var r;return function(){var o=this,a=arguments;if(clearTimeout(r),n){var i=!r;r=setTimeout(function(){r=null},e),i&&t.apply(o,a)}else r=setTimeout(function(){t.apply(o,a)},e)}},_throttle:function(t,e){var n,r,o,a=0,i=function(){a=+new Date,n=null,t.apply(r,o)},s=function(){var r=+new Date,s=e-(r-a),u=this;o=arguments,s<=0?(n&&(clearTimeout(n),n=null),a=r,t.apply(u,o)):n||(n=setTimeout(i,s))};return s},_changeTab:function(){var t=this;setTimeout(function(){t.TABBTNWIDTH=document.querySelector(".em-nav a").offsetWidth,t.TABLINENODE=document.querySelector("#topNavLine");var e=(t.TABBTNWIDTH-t.TABLINEWIDTH)/2;t.TABLINENODE.style.webkitTransform="translate3d("+e+"px, 0px, 0px)",setTimeout(function(){t.TABLINENODE.style.opacity="1"},300),mui(".em-nav").on("tap","a",function(){var n=this.getBoundingClientRect().left,r=e+n;t.TABLINENODE.style.webkitTransform="translate3d("+r+"px, 0px, 0px)";var o=0,a=Zepto(this).index();t._transfrom(t.TABVIEWPARENTNODE,-(o+t.TABVIEWWIDTH*a))})},200)},_switchHead:function(t){var e=this,n=(e.TABBTNWIDTH-e.TABLINEWIDTH)/2;e._transfrom(e.TABLINENODE,n+e.TABBTNWIDTH*(t-1),!0)},_setBodyStyle:function(t){var e=t.children,n=100*e.length;t.style.cssText="display: flex; width: "+n+"%; overflow: hidden; transform: translate3d(0, 0, 0);";for(var r=0,o=e.length;r<o;r++)e[r].style.width="100%"}},n.tabView=r}({},document,window);